% Auto-generated by stereoCalibrator app on 30-Nov-2019
%-------------------------------------------------------


% Define images to process
imageFileNames1 = {'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (10)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (11)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (13)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (14)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (15)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (16)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (17)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (18)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (19)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (2)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (20)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (21)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (22)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (23)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (24)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (25)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (26)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (27)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (29)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (30)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (31)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (32)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (33)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (34)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (35)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (36)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (37)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (38)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (39)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (4)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (40)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (41)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (42)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (43)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (44)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (45)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (46)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (47)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (48)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (49)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (5)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (50)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (51)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (53)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (54)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (55)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (56)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (57)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (58)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (59)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (6)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (60)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (61)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (62)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (63)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (64)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (65)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (66)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (7)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (8)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\left\cam_0 (9)',...
    };
imageFileNames2 = {'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (10)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (11)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (13)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (14)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (15)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (16)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (17)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (18)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (19)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (2)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (20)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (21)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (22)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (23)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (24)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (25)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (26)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (27)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (29)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (30)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (31)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (32)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (33)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (34)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (35)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (36)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (37)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (38)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (39)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (4)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (40)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (41)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (42)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (43)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (44)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (45)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (46)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (47)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (48)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (49)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (5)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (50)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (51)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (53)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (54)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (55)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (56)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (57)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (58)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (59)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (6)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (60)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (61)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (62)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (63)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (64)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (65)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (66)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (7)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (8)',...
    'C:\Users\SIKOS FIÚ\Documents\MATLAB\cv\virtual-pointer-master\virtual-pointer-master\right\cam_1 (9)',...
    };

% Detect checkerboards in images
test1 = 'C:\Users\SIKOS FIÚ\Documents\MATLAB\virtual-pointer\data\out_screen2_FINAL\0\cam_0.png';

test2 = 'C:\Users\SIKOS FIÚ\Documents\MATLAB\virtual-pointer\data\out_screen2_FINAL\0\cam_1.png';
[imagePoints, boardSize, imagesUsed] = detectCheckerboardPoints(imageFileNames1, imageFileNames2);
%[imagePoints, boardSize, imagesUsed] = detectCheckerboardPoints(test1);


% Generate world coordinates of the checkerboard keypoints
squareSize = 100;  % in units of 'millimeters'
worldPoints = generateCheckerboardPoints(boardSize, squareSize);

% Read one of the images from the first stereo pair
I1 = imread(imageFileNames1{1});
[mrows, ncols, ~] = size(I1);

% Calibrate the camera
[stereoParams, pairsUsed, estimationErrors] = estimateCameraParameters(imagePoints, worldPoints, ...
    'EstimateSkew', true, 'EstimateTangentialDistortion', true, ...
    'NumRadialDistortionCoefficients', 2, 'WorldUnits', 'millimeters', ...
    'InitialIntrinsicMatrix', [], 'InitialRadialDistortion', [], ...
    'ImageSize', [mrows, ncols]);

[rotationMatrix, translationVector] = extrinsics(...
imagePoints(:,:,16,1),worldPoints,stereoParams.CameraParameters1);

% View reprojection errors
h1=figure; showReprojectionErrors(stereoParams);

% Visualize pattern locations
h2=figure; showExtrinsics(stereoParams, 'CameraCentric');

% Display parameter estimation errors
displayErrors(estimationErrors, stereoParams);

% You can use the calibration data to rectify stereo images.
I2 = imread(imageFileNames2{1});
[J1, J2] = rectifyStereoImages(I1, I2, stereoParams);

% See additional examples of how to use the calibration data.  At the prompt type:
% showdemo('StereoCalibrationAndSceneReconstructionExample')
% showdemo('DepthEstimationFromStereoVideoExample')
